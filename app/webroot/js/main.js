function objDump(t){"use strict";var e="";for(var n in t)e+=n+"="+t[n]+"\n";alert(e)}var User=Backbone.Model.extend({url:"/users",defaults:{id:null,username:null,password:null,role:null,created:null,modified:null},sync:function(t,e,n){"use strict";switch(t){case"read":case"update":case"delete":n.url=e.url+"/"+e.get("id")+".json";break;default:case"create":n.url=e.url+".json"}return Backbone.sync(t,e,n)}}),UserList=Backbone.Collection.extend({model:User,url:"/users",parse:function(t){"use strict";var e=void 0!==t.users?t.users:t;return e},done:function(){"use strict";return this.where({done:!0})},remaining:function(){"use strict";return this.where({done:!1})},nextOrder:function(){"use strict";return this.length?this.last().get("order")+1:1},comparator:"id"}),TableItemView=Backbone.Marionette.ItemView.extend({tagName:"tr",model:User,template:"#ItemViewTemplate",templateHelpers:function(){"use strict";return{}},bindings:{"td#id":"id","td#username":"username","td#password":"password","td#role":"role","td#created":"created","td#modified":"modified"},initialize:function(){"use strict"},onRender:function(){"use strict"},onShow:function(){"use strict";this.stickit()}}),SearchView=Marionette.CompositeView.extend({itemView:TableItemView,itemViewContainer:"#body",template:"#SearchViewTemplate",templateHelpers:function(){"use strict";return{}},ui:{addButton:"#add",addAjaxButton:"#addAjax",editButton:"#edit",editAjaxButton:"#editAjax",deleteButton:"#delete",deleteAjaxButton:"#deleteAjax",viewButton:"#view",viewAjaxButton:"#viewAjax",indexButton:"#index",indexAjaxButton:"#indexAjax",subButton:"#sub",eventName:"#eventName"},events:{"click @ui.addButton":"onClickAddButton","click @ui.addAjaxButton":"onClickAddAjaxButton","click @ui.editButton":"onClickEditButton","click @ui.editAjaxButton":"onClickEditAjaxButton","click @ui.deleteButton":"onClickDeleteButton","click @ui.deleteAjaxButton":"onClickDeleteAjaxButton","click @ui.viewButton":"onClickViewButton","click @ui.viewAjaxButton":"onClickViewAjaxButton","click @ui.indexButton":"onClickIndexButton","click @ui.indexAjaxButton":"onClickIndexAjaxButton","click @ui.subButton":"onClickSubButton"},initialize:function(){"use strict";this.collection&&(this.collection.on("all",_.bind(function(t,e,n){var i=this,o=i.ui.eventName.text();switch(i.ui.eventName.text(o+" "+t),t){case"error":var s=n;switch(alert(s.status),s.status){case 401:location.href="/logins/login";break;default:case 500:case 405:case 202:case 400:case 404:case 503:case 200:case 201:}}},this)),$.ajaxSetup({cache:!1,async:!0,dataType:"json",beforeSend:function(t){var e="Bearer "+localStorage.getItem("accessToken");t.setRequestHeader("Authorization",e)}}))},onClickSubButton:function(){"use strict";location.href="/main/sub"},onClickAddButton:function(){"use strict";var t=this,e={username:"addTest",password:"add",role:"admin"},n=new t.collection.model;n.on("sync",_.bind(function(t){t.off("sync"),this.collection.add(t)},t)),n.save(e)},onClickAddAjaxButton:function(){"use strict";var t={User:{username:"addTest",password:"add",role:"admin"}},e="/users.json";$.ajax({data:t,type:"post",url:e}).done(function(t){alert(t.message)}).fail(function(t,e,n){alert(t.responseText),alert(e),objDump(n)})},onClickEditAjaxButton:function(){"use strict";var t=this,e=t.collection.last(),n={User:{username:"editTest",password:"edit",role:"author"}},i="/users/"+e.get("id")+".json";$.ajax({data:n,type:"put",url:i}).done(function(t){alert(t.message)}).fail(function(t,e,n){alert(t.responseText),alert(e),objDump(n)})},onClickEditButton:function(){"use strict";var t=this,e=t.collection.last(),n={username:"editTest",password:"edit",role:"author"};e.save(n)},onClickDeleteButton:function(){"use strict";var t=this,e=t.collection.last();e.on("destroy",_.bind(function(t,e){this.off("destroy"),e.remove(t)},t)),e.destroy()},onClickDeleteAjaxButton:function(){"use strict";var t=this,e=t.collection.last(),n="/users/"+e.get("id")+".json";$.ajax({type:"delete",url:n}).done(function(t){alert(t.message)}).fail(function(t,e,n){alert(t.responseText),alert(e),objDump(n)})},onClickViewButton:function(){"use strict";var t=this,e=t.collection.last();e.fetch()},onClickViewAjaxButton:function(){"use strict";var t="/users/6.json";$.ajax({type:"get",url:t}).done(function(t){objDump(t)}).fail(function(t,e,n){alert(t.responseText),alert(e),objDump(n)})},onClickIndexButton:function(){"use strict";var t=this;t.collection.fetch()},onClickIndexAjaxButton:function(){"use strict";var t="/users.json";$.ajax({type:"get",url:t}).done(function(t){_.each(t,function(t){objDump(t)})}).fail(function(t,e,n){alert(t.responseText),alert(e),objDump(n)})},onShow:function(){"use strict";this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el),this.collection.fetch(),$("#sub").on("click",this.onClickSubButton)}}),app=new Marionette.Application;app.addRegions({filterRegion:"#filter"}),app.addInitializer(function(){"use strict";app.filterRegion.show(new SearchView({collection:new UserList({})}))}),app.on("start",function(){"use strict";Backbone.history&&Backbone.history.start()}),$(function(){"use strict";app.start()});